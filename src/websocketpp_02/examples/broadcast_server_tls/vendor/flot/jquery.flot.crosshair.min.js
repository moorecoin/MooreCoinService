(function(b){var a={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",linewidth:1}};function c(h){var j={x:-1,y:-1,locked:false};h.setcrosshair=function e(l){if(!l){j.x=-1}else{var k=h.p2c(l);j.x=math.max(0,math.min(k.left,h.width()));j.y=math.max(0,math.min(k.top,h.height()))}h.triggerredrawoverlay()};h.clearcrosshair=h.setcrosshair;h.lockcrosshair=function f(k){if(k){h.setcrosshair(k)}j.locked=true};h.unlockcrosshair=function g(){j.locked=false};function d(k){if(j.locked){return}if(j.x!=-1){j.x=-1;h.triggerredrawoverlay()}}function i(k){if(j.locked){return}if(h.getselection&&h.getselection()){j.x=-1;return}var l=h.offset();j.x=math.max(0,math.min(k.pagex-l.left,h.width()));j.y=math.max(0,math.min(k.pagey-l.top,h.height()));h.triggerredrawoverlay()}h.hooks.bindevents.push(function(l,k){if(!l.getoptions().crosshair.mode){return}k.mouseout(d);k.mousemove(i)});h.hooks.drawoverlay.push(function(m,k){var n=m.getoptions().crosshair;if(!n.mode){return}var l=m.getplotoffset();k.save();k.translate(l.left,l.top);if(j.x!=-1){k.strokestyle=n.color;k.linewidth=n.linewidth;k.linejoin="round";k.beginpath();if(n.mode.indexof("x")!=-1){k.moveto(j.x,0);k.lineto(j.x,m.height())}if(n.mode.indexof("y")!=-1){k.moveto(0,j.y);k.lineto(m.width(),j.y)}k.stroke()}k.restore()});h.hooks.shutdown.push(function(l,k){k.unbind("mouseout",d);k.unbind("mousemove",i)})}b.plot.plugins.push({init:c,options:a,name:"crosshair",version:"1.0"})})(jquery);