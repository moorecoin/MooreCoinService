(function(b){var a={series:{stack:null}};function c(f){function d(k,j){var h=null;for(var g=0;g<j.length;++g){if(k==j[g]){break}if(j[g].stack==k.stack){h=j[g]}}return h}function e(c,v,g){if(v.stack==null){return}var p=d(v,c.getdata());if(!p){return}var z=g.pointsize,f=g.points,h=p.datapoints.pointsize,y=p.datapoints.points,t=[],x,w,k,j,i,r,u=v.lines.show,g=v.bars.horizontal,o=z>2&&(g?g.format[2].x:g.format[2].y),n=u&&v.lines.steps,e=true,q=g?1:0,h=g?0:1,d=0,b=0,a;while(true){if(d>=f.length){break}a=t.length;if(f[d]==null){for(m=0;m<z;++m){t.push(f[d+m])}d+=z}else{if(b>=y.length){if(!u){for(m=0;m<z;++m){t.push(f[d+m])}}d+=z}else{if(y[b]==null){for(m=0;m<z;++m){t.push(null)}e=true;b+=h}else{x=f[d+q];w=f[d+h];j=y[b+q];i=y[b+h];r=0;if(x==j){for(m=0;m<z;++m){t.push(f[d+m])}t[a+h]+=i;r=i;d+=z;b+=h}else{if(x>j){if(u&&d>0&&f[d-z]!=null){k=w+(f[d-z+h]-w)*(j-x)/(f[d-z+q]-x);t.push(j);t.push(k+i);for(m=2;m<z;++m){t.push(f[d+m])}r=i}b+=h}else{if(e&&u){d+=z;continue}for(m=0;m<z;++m){t.push(f[d+m])}if(u&&b>0&&y[b-h]!=null){r=i+(y[b-h+h]-i)*(x-j)/(y[b-h+q]-j)}t[a+h]+=r;d+=z}}e=false;if(a!=t.length&&o){t[a+2]+=r}}}}if(n&&a!=t.length&&a>0&&t[a]!=null&&t[a]!=t[a-z]&&t[a+1]!=t[a-z+1]){for(m=0;m<z;++m){t[a+z+m]=t[a+m]}t[a+1]=t[a-z+1]}}g.points=t}f.hooks.processdatapoints.push(e)}b.plot.plugins.push({init:c,options:a,name:"stack",version:"1.2"})})(jquery);